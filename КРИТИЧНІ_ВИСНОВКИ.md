# –ö–†–ò–¢–ò–ß–ù–Ü –í–ò–°–ù–û–í–ö–ò –ü–†–û API ALFACRM

## ‚ùå –ì–û–õ–û–í–ù–ê –ü–†–û–ë–õ–ï–ú–ê

**–ê—Ä—Ö—ñ–≤–Ω—ñ –ª—ñ–¥–∏ (lead_reject_id != null) –ù–ï –î–û–°–¢–£–ü–ù–Ü —á–µ—Ä–µ–∑ API endpoint `/v2api/customer/index`**

## üìä –©–æ –±—É–ª–æ –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ

### 1. –§—ñ–ª—å—Ç—Ä `lead_reject_id` - **–ù–ï –ü–†–ê–¶–Æ–Ñ**

```python
# –ó–∞–ø–∏—Ç –∑ —Ñ—ñ–ª—å—Ç—Ä–æ–º
payload = {
    "lead_reject_id": 44,  # –û–¥–Ω–∞ –∑ 44 –ø—Ä–∏—á–∏–Ω –≤—ñ–¥–º–æ–≤
    "page": 1,
    "page_size": 50
}

# –†–µ–∑—É–ª—å—Ç–∞—Ç
–û—Ç—Ä–∏–º–∞–Ω–æ: 50 –ª—ñ–¥—ñ–≤
–ó lead_reject_id=44: 0 –ª—ñ–¥—ñ–≤
–ó lead_reject_id=None: 50 –ª—ñ–¥—ñ–≤

# ‚ùå –í–ò–°–ù–û–í–û–ö: –§—ñ–ª—å—Ç—Ä –ü–û–í–ù–Ü–°–¢–Æ –Ü–ì–ù–û–†–£–Ñ–¢–¨–°–Ø API!
```

### 2. –Ü–Ω—à—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∞—Ä—Ö—ñ–≤—É - **–ù–ï –ü–†–ê–¶–Æ–Æ–¢–¨**

–ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ:
- `archived: True/1`
- `is_archive: True/1`
- `archive: True/1`
- `lead_reject_id: {"$ne": None}`
- `customer_reject_id: {"$ne": None}`
- `status: "archive"`
- `state: "archive"`

**–†–µ–∑—É–ª—å—Ç–∞—Ç: –í–°–Ü –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —ñ–≥–Ω–æ—Ä—É—é—Ç—å—Å—è, –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è —Ç—ñ —Å–∞–º—ñ 50 –ª—ñ–¥—ñ–≤ –∑ lead_reject_id=None**

### 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ endpoints - **–ù–ï –Ü–°–ù–£–Æ–¢–¨**

–ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –±—ñ–ª—å—à–µ 20 –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤:
- `/v2api/lead/reject`
- `/v2api/customer/reject`
- `/v2api/archive/index`
- `/v2api/lead-archive/index`
- `/api/v2/{company_id}/lead/reject` (–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó)
- —Ç–∞ —ñ–Ω—à—ñ...

**–†–µ–∑—É–ª—å—Ç–∞—Ç: –í–°–Ü –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å 404 Not Found**

### 4. –ì–ª–∏–±–æ–∫–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è - **–ù–ï –î–û–ü–û–ú–û–ì–õ–ê**

```python
# –û—Ç—Ä–∏–º–∞–Ω–æ –í–°–Ü –ª—ñ–¥–∏ –∑ is_study=0
–°—Ç–æ—Ä—ñ–Ω–æ–∫: 42
–í—Å—å–æ–≥–æ –ª—ñ–¥—ñ–≤: 2066
–ó lead_reject_id != None: 0

# ‚ùå –í–ò–°–ù–û–í–û–ö: –°–µ—Ä–µ–¥ 2066 –∞–∫—Ç–∏–≤–Ω–∏—Ö –ª—ñ–¥—ñ–≤ –ù–Ü –û–î–ù–û–ì–û –∞—Ä—Ö—ñ–≤–Ω–æ–≥–æ!
```

### 5. –§—ñ–ª—å—Ç—Ä–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞—Ö - **–ù–ï –î–û–ü–û–ú–û–ì–õ–ò**

–ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ —Å—Ç–∞—Ç—É—Å–∏ –∑ –∞—Ä—Ö—ñ–≤–Ω–æ—ó –≤–∫–ª–∞–¥–∫–∏ UI:
- ID=13: "–ù–µ —Ä–æ–∑—ñ–±—Ä–∞–Ω–∏–π"
- ID=11: "–ù–µ–¥–æ–¥–∑–≤–æ–Ω"
- ID=10: "–ù–µ–¥–æ–∑–≤–æ–Ω 2"
- ID=27: "–ù–µ–¥–æ–∑–≤–æ–Ω 3"

**–†–µ–∑—É–ª—å—Ç–∞—Ç: –í—Å—ñ –æ—Ç—Ä–∏–º–∞–Ω—ñ –ª—ñ–¥–∏ –º–∞—é—Ç—å lead_reject_id=None**

## üìà –©–æ –Ω–∞–º –í–Ü–î–û–ú–û

1. ‚úÖ –í UI AlfaCRM –ø–æ–∫–∞–∑—É—î **~7788 –∞—Ä—Ö—ñ–≤–Ω–∏—Ö –ª—ñ–¥—ñ–≤**
2. ‚úÖ –Ü—Å–Ω—É—î **44 –ø—Ä–∏—á–∏–Ω–∏ –≤—ñ–¥–º–æ–≤ –¥–ª—è –ª—ñ–¥—ñ–≤** (endpoint `/v2api/lead-reject/index` –ø—Ä–∞—Ü—é—î)
3. ‚úÖ –Ü—Å–Ω—É—î **49 –ø—Ä–∏—á–∏–Ω –≤—ñ–¥–º–æ–≤ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤** (endpoint `/v2api/customer-reject/index` –ø—Ä–∞—Ü—é—î)
4. ‚úÖ –ü–æ–ª–µ `lead_reject_id` —Ç–∞ `customer_reject_id` —ñ—Å–Ω—É—é—Ç—å –≤ API –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
5. ‚ùå –ê–ª–µ –í–°–Ü –æ—Ç—Ä–∏–º–∞–Ω—ñ —á–µ—Ä–µ–∑ API –ª—ñ–¥–∏ –º–∞—é—Ç—å —Ü—ñ –ø–æ–ª—è = `null`

## üéØ –í–ò–°–ù–û–í–ö–ò

### –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:

1. **–ê—Ä—Ö—ñ–≤–Ω—ñ –ª—ñ–¥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –æ–∫—Ä–µ–º–æ**
   - –ú–æ–∂–ª–∏–≤–æ –≤ —ñ–Ω—à—ñ–π —Ç–∞–±–ª–∏—Ü—ñ –ë–î
   - –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ñ —á–µ—Ä–µ–∑ –ø—É–±–ª—ñ—á–Ω–∏–π API
   - –¢—ñ–ª—å–∫–∏ UI –º–∞—î –¥–æ –Ω–∏—Ö –¥–æ—Å—Ç—É–ø

2. **API —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î —ñ–Ω–∞–∫—à–µ**
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∑–∞—Å—Ç–∞—Ä—ñ–ª–∞ –∞–±–æ –¥–ª—è —ñ–Ω—à–æ—ó –≤–µ—Ä—Å—ñ—ó
   - –ü–æ—Ç—Ä—ñ–±–Ω—ñ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
   - –Ü–Ω—à–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Ç—ñ–≤

3. **–ë–∞–≥ –≤ API AlfaCRM**
   - –§—ñ–ª—å—Ç—Ä–∏ –ø–æ reject_id –Ω–µ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ
   - –ê–±–æ —î –∞–ª–µ –Ω–µ –ø—Ä–∞—Ü—é—é—Ç—å –≤ —Ü—ñ–π –≤–µ—Ä—Å—ñ—ó

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–Ü–á

### –ö–æ—Ä–æ—Ç–∫–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ:

1. **–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —â–æ —î**: 2066 –ª—ñ–¥—ñ–≤ (–∞–∫—Ç–∏–≤–Ω—ñ + —á–∞—Å—Ç–∫–æ–≤–æ –∞—Ä—Ö—ñ–≤–Ω—ñ?)
2. **–ó–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ AlfaCRM** –∑ –ø–∏—Ç–∞–Ω–Ω—è–º–∏:
   - –Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∞—Ä—Ö—ñ–≤–Ω—ñ –ª—ñ–¥–∏ —á–µ—Ä–µ–∑ API?
   - –ß–æ–º—É —Ñ—ñ–ª—å—Ç—Ä `lead_reject_id` –Ω–µ –ø—Ä–∞—Ü—é—î?
   - –Ø–∫–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π endpoint –¥–ª—è –∞—Ä—Ö—ñ–≤—É?

### –î–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤—ñ:

1. **–ú–æ–∂–ª–∏–≤–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω —ñ–Ω—à–∏–π –º–µ—Ç–æ–¥ –¥–æ—Å—Ç—É–ø—É:**
   - –ü—Ä—è–º–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –ë–î (—è–∫—â–æ —î)
   - –ï–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ UI AlfaCRM
   - Webhook-–∏ –Ω–∞ –ø–æ–¥—ñ—ó –∞—Ä—Ö—ñ–≤–∞—Ü—ñ—ó
   - –Ü–Ω—à–∏–π —Ç–∏–ø API –∫–ª—é—á–∞ –∑ –±—ñ–ª—å—à–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏

## üìù –°–¢–ê–¢–ò–°–¢–ò–ö–ê –¢–ï–°–¢–£–í–ê–ù–ù–Ø

- **–°—Ç–≤–æ—Ä–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤–∏—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤**: 20+
- **–ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ–π –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤**: 50+
- **–ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ endpoints**: 20+
- **–ß–∞—Å—É –≤–∏—Ç—Ä–∞—á–µ–Ω–æ**: ~3+ –≥–æ–¥–∏–Ω–∏
- **–ó–Ω–∞–π–¥–µ–Ω–æ –∞—Ä—Ö—ñ–≤–Ω–∏—Ö –ª—ñ–¥—ñ–≤ —á–µ—Ä–µ–∑ API**: **0**

## üîç –û–°–¢–ê–ù–ù–Ü–ô –¢–ï–°–¢

```python
# –ù–∞–π–±—ñ–ª—å—à –ø–æ–≤–Ω–∏–π –∑–∞–ø–∏—Ç (is_study=2 = –í–°–Ü –∑–∞–ø–∏—Å–∏)
–ó–∞–ø–∏—Ç: {
    "is_study": 2,  # –õ—ñ–¥–∏ + –°—Ç—É–¥–µ–Ω—Ç–∏
    "page": 1,
    "page_size": 500
}

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- Count: 50 (–æ–¥–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞)
- Items: 50
- –ê—Ä—Ö—ñ–≤–Ω–∏—Ö: 0

# ‚ùå –ù–∞–≤—ñ—Ç—å –ë–ï–ó –ñ–û–î–ù–ò–• —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ - –∞—Ä—Ö—ñ–≤–Ω—ñ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è!
```

---

**–î–∞—Ç–∞**: 2025-10-29
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ê—Ä—Ö—ñ–≤–Ω—ñ –ª—ñ–¥–∏ —á–µ—Ä–µ–∑ API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è**: –ó–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Ç–µ—Ö–ø—ñ–¥—Ç—Ä–∏–º–∫–∏ AlfaCRM
